<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/base-admin}" th:with="menu='order'">
<div layout:fragment="content-admin" class="container my-3">
    <div class="row mb-3">
        <div class="col-2">
            <div th:replace="~{layout/sidebar-admin :: sidebar-admin-fragment}"></div>
        </div>
        <div class="col-10">
            <h1>상품환불리스트</h1>
            <!--모달창-->
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#product-refund">
                    환불승인
                </button>
                <div class="modal modal-lg" id="product-refund" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h1>환불승인</h1>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body" id="modalBody">
                                <div class="col-10">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>환불상품명</th>
                                            <td>침대</td>
                                            <th>환불금액</th>
                                            <td>10,0000</td>
                                        </tr>
                                        <tr>
                                            <th>주문자명</th>
                                            <td>김유신</td>
                                            <th>환불사유</th>
                                            <td>침대 상태가 너무 않좋아요</td>
                                        </tr>
                                        </thead>
                                    </table>
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>회수지 정보</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td>서울종로구 율곡로</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">승인</button>
                                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">취소</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <table class="table">
                <thead>
                <tr>
                    <th>체크</th>
                    <th>순번</th>
                    <th>환불번호</th>
                    <th>환불접수일자</th>
                    <th>환불금액</th>
                    <th>환불처리상태</th>
                    <th>주문자</th>
                </tr>
                </thead>
                <tbody id="itemRefundBody">
                <tr th:each="refund : ${refunds}">
                    <th>
                        <input class="form-check-input" type="checkbox" value="">
                    </th>
                    <th th:text="${refundStat.count}">1</th>
                    <th th:text="${refund.id}">500000</th>
                    <td th:text="${#dates.format(refund.createDate,'yyyy-MM-dd')}">2024-04-16</td>
                    <td th:text="${refund.amount}">50,000</td>
                    <td th:text="${refund.status}">환불신청</td>
                    <td th:text="${refund.userNickname}">주문자</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<!--<script type="text/javascript" th:src="@{/webjars/jquery/3.7.1/jquery.min.js}"></script>-->
<!--<script type="text/javascript" layout:fragment="script" th:inline="javascript">-->
<!--    // model 데이터 가져오기-->
<!--    let itemReturnList = [[${itemReturnList}]];-->
<!--    // 화면 그리기-->
<!--    refreshItemReturnBody();-->

<!--    function refreshItemReturnBody() {-->
<!--        // 화면 초기화-->
<!--        $("#itemReturnBody").html("");-->

<!--        // 화면 html-->
<!--        let htmlStr = '';-->
<!--        itemReturnList.forEach(function(returnItem, index) {-->
<!--            htmlStr += `-->
<!--            <tr id="itemReturnBody">-->
<!--                <th>-->
<!--                    <input class="form-check-input" type="checkbox" value="${returnItem.itemReturnId}">-->
<!--                </th>-->
<!--                <th>${index + 1}</th>-->
<!--                <th>${returnItem.itemReturnId}</th>-->
<!--                <td>${new Date(returnItem.itemReturnCreateDate).toISOString().split('T')[0]}</td>-->
<!--                <th>${returnItem.userNickname}</th>-->
<!--                <th>${returnItem.itemReturnStatus}</th>-->
<!--                <th>${returnItem.itemReturnYn}</th>-->
<!--            </tr>`;-->
<!--        });-->
<!--        $("#itemReturnBody").html(htmlStr);-->
<!--    }-->

<!--    function callModal() {-->
<!--        // 초기화-->
<!--        $("#modalBody").html("");-->

<!--        // 화면 html-->
<!--        let htmlStr = '';-->

<!--        // 체크된 item-->
<!--        $("input:checked").each(function(index, inputItem) {-->
<!--            itemReturnList.forEach(function(returnItem, index) {-->
<!--                if (inputItem.value == returnItem.itemReturnId) {-->
<!--                    // 화면-->
<!--                    htmlStr += `-->
<!--                        <div class="10">-->
<!--                            <table class="table">-->
<!--                                <thead>-->
<!--                                    <tr>-->
<!--                                        <th>환불상품명</th>-->
<!--                                        <td></td>-->
<!--                                        <th>환불품금액</th>-->
<!--                                        <td></td>-->
<!--                                    </tr>-->
<!--                                    <tr>-->
<!--                                        <th>주문자명</th>-->
<!--                                        <td></td>-->
<!--                                        <th>환불사유</th>-->
<!--                                        <td></td>-->
<!--                                    </tr>-->
<!--                                </thead>-->
<!--                            </table>-->
<!--                            <table class="table">-->
<!--                                <thead>-->
<!--                                    <tr>-->
<!--                                        <th>회수지 정보</th>-->
<!--                                    </tr>-->
<!--                                </thead>-->
<!--                                <tbody>-->
<!--                                    <tr>-->
<!--                                        <td>서울특별시 종로구 율곡로10길 105 디아망 4층</td>-->
<!--                                    </tr>-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>`;-->
<!--                }-->
<!--            })-->
<!--        });-->
<!--        $("#modalBody").html(htmlStr);-->
<!--    }-->

<!--    function sendUpdate() {-->
<!--        // 보낼 아이템-->
<!--        let selectItem = [];-->

<!--        // 체크된 item-->
<!--        $("input:checked").each(function(index, inputItem) {-->
<!--            itemReturnList.forEach(function(returnItem, index) {-->
<!--                if (inputItem.value == returnItem.itemReturnId) {-->
<!--                    // 보낼 아이템 push-->
<!--                    selectItem.push(returnItem)-->
<!--                }-->
<!--            });-->
<!--        });-->

<!--        if (confirm('정말 환불을 저장하시겠습니까?')) {-->
<!--            $.ajax({-->
<!--                type: 'POST',-->
<!--                // url: '/admin/order/updateReturn',-->
<!--                data: JSON.stringify(selectItem),-->
<!--                contentType: 'application/json',-->
<!--                success: function(data) {-->
<!--                    if (data > 0) {-->
<!--                        // alert("상품반품이 완료되었습니다.")-->

<!--                        $("input:checked").each(function(index, inputItem) {-->
<!--                            itemReturnList.forEach(function(returnItem, index) {-->
<!--                                if (inputItem.value == returnItem.itemReturnId) {-->
<!--                                    // itemReturnList[index].itemReturnYn = "Y";-->
<!--                                    // itemReturnList[index].itemReturnStatus = "반품완료";-->
<!--                                }-->
<!--                            });-->
<!--                        });-->

<!--                        refreshItemReturnBody();-->
<!--                    }-->
<!--                }-->
<!--            });-->
<!--        }-->
<!--    }-->
<!--</script>-->
</html>