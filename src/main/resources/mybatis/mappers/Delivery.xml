<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.roommake.order.mapper.DeliveryMapper">

    <select id="getDeliveriesByUserId" parameterType="int" resultType="com.roommake.order.vo.Delivery">
        select
            delivery_id         as id,
            user_id             as "user.id",
            delivery_name       as name,
            delivery_recipient  as recipient,
            delivery_phone      as phone,
            delivery_address1   as address1,
            delivery_address2   as address2,
            delivery_zipcode    as zipcode,
            delivery_memo       as memo,
            delivery_default_yn as defaultYn
        from
            delivery
        where
            user_id = #{userId}
        order by delivery_id desc
    </select>

    <insert id="createDelivery" parameterType="com.roommake.order.vo.Delivery">
        insert into delivery
            (user_id, delivery_name, delivery_recipient, delivery_phone, delivery_address1, delivery_address2, delivery_zipcode)
        values
            (#{user.id}, #{name}, #{recipient}, #{phone}, #{address1}, #{address2}, #{zipcode})
    </insert>

    <delete id="deleteDelivery" parameterType="com.roommake.order.vo.Delivery">
        delete from
            delivery
        where
            delivery_id = #{id}
        and user_id = #{user.id}
    </delete>

</mapper>